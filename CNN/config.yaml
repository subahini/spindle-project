# ===============================
# DATA MODE
# ===============================
data_mode: "single_subject_edf"


subject_files:
  - edf_dir: "../data/raw"
    json_dir: "../data/labels"


channels:
  use_channel_names: true
  names:
    ["C3","C4","O1","O2","Fp1","Fp2","F7","F3","Fz","F4","F8",
     "T3","T4","T5","T6","P3","Pz","P4","Oz"]
  n_channels: 19

filter:
  hp_freq: 1.0
  lp_freq: 30.0

windowing:
  window_sec: 2.0
  step_sec: 1.0
  overlap_threshold: 0.3

splits:
  # ---- SINGLE SUBJECT (P002 only) ----
  # Use this for sweeps & debugging
  n_folds: 1
  fold: 1

  # ---- MULTI SUBJECT (P002, P003, â€¦) ----
  # n_folds: 5
  # fold: 1   # change 1..5 to run different folds

  random_state: 42

# ===============================
# TRAINING
# MODEL ARCHITECTURE
# ===============================
model:
  dropout_rate: 0.4

# ===============================
# TRAINING HYPERPARAMETERS
# ===============================
training:
  num_epochs: 50
  batch_size: 64
  learning_rate: 1e-4
  weight_decay: 1e-5
  num_workers: 4
  early_stopping_patience: 9999

# ===============================
# LOSS
# LOSS FUNCTION (Simplified - pick ONE strategy)
# ===============================
loss:
  name: "weighted_bce"
  name: "weighted_bce"  # Options: weighted_bce, focal, dice, bce

  # Weighted BCE settings
  weighted_bce:
    pos_weight: "auto"
    adaptive: false
    target_pos_rate: 0.1
    label_smoothing: 0.0  # Keep 0

  # Focal Loss settings
  focal:
    alpha: 0.25
    gamma: 2.0
    label_smoothing: 0.0  # MUST be 0 for focal

  # Dice Loss settings
  dice:
    smooth: 1.0

  # Plain BCE settings
  bce:
    label_smoothing: 0.0

# ===============================
# SAMPLING STRATEGY
# ===============================
sampling:
  # Options: "none", "weighted_sampler"
  #  Don't use weighted_sampler with weighted_bce (redundant!)
  type: "none"

# ===============================
# DEVICE
# ===============================
device:
  preferred: "cuda"


# ===============================
# WANDB
# ===============================
wandb:
  enabled: true
  project: "spindle_cnn2d"
  entity: "subahininadarajh-basel-university"
  run_name: null
  run_name: null    # or "cnn_debug" or anything you like
  log_val_plots_every: 1
